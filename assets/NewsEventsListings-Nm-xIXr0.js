import{c as N,j as e,S as H,T as x,B as E,a as I,v as _,r as s,H as z}from"./index-C2hfVn6k.js";import{C as A,a as G}from"./CardContent-CVYRDK_0.js";import{C as U}from"./CardMedia-CtTbO1ES.js";import{F as V}from"./FullPageLoader-D93dE52d.js";import{G as f}from"./Grid-BNK0cvxE.js";const P=N(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),W="https://via.placeholder.com/400x200?text=No+Image",q=({event:t})=>e.jsxs(A,{sx:{borderRadius:2,boxShadow:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(U,{component:"img",image:t.image||W,alt:t.title,sx:{height:200}}),e.jsxs(G,{sx:{flexGrow:1},children:[e.jsxs(H,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[e.jsx(P,{fontSize:"small",color:"action"}),e.jsx(x,{variant:"caption",color:"text.secondary",children:t.date})]}),e.jsx(x,{variant:"h6",component:"div",gutterBottom:!0,children:t.title}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description.length>100?`${t.description.substring(0,100)}...`:t.description}),e.jsx(E,{children:e.jsx(I,{component:_,to:`${t.slug}`,size:"small",variant:"outlined",children:"Read More"})})]})]}),J=N([e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-3.5c.73 0 1.39.19 1.97.53.12-.14.86-.98 1.01-1.14-.85-.56-1.87-.89-2.98-.89s-2.13.33-2.99.88c.97 1.09.01.02 1.01 1.14.59-.33 1.25-.52 1.98-.52"},"2")],"SentimentDissatisfied"),K=()=>e.jsxs(E,{sx:{textAlign:"center",p:5,border:"1px dashed #ccc",borderRadius:2,bgcolor:"#f9f9f9",color:"text.secondary"},children:[e.jsx(J,{sx:{fontSize:60,mb:2,color:"grey.500"}}),e.jsx(x,{variant:"h6",gutterBottom:!0,children:"No News or Events Found"}),e.jsx(x,{variant:"body2",children:"We couldn’t find any events at the moment. Please check back later."})]}),te=({apiUrl:t})=>{const[n,d]=s.useState(!1),[o,i]=s.useState([]),[c,u]=s.useState(null),[a,p]=s.useState({keyword:""}),[j,k]=s.useState(!0),[l,g]=s.useState(1),v=s.useRef(0),[C,R]=s.useState(1),[b,D]=s.useState("News & Events"),[F,M]=s.useState(""),[T,B]=s.useState(""),$=s.useRef(a),w=s.useRef(a);s.useEffect(()=>{$.current=a},[a]),s.useEffect(()=>{const r=new URLSearchParams(window.location.search);p({keyword:r.get("keyword")||""}),g(Number(r.get("page"))||1)},[]),s.useEffect(()=>{a.keyword!==w.current.keyword&&(y(),w.current=a)},[a,l]);const y=async()=>{d(!0),u(null);try{const r=new URLSearchParams({keyword:a.keyword,page:l.toString()}),h=`${t}?${r.toString()}`,S=await fetch(h);if(!S.ok)throw new Error("Failed to fetch events");const m=await S.json();i(m.data.records||[]),R(m.data.total_pages),k(m.data.need_banner),B(m.data.banner_image),D(m.data.title||"News & Events"),M(m.data.sub_title||"")}catch(r){console.error("Error fetching events:",r),u("Failed to load events. Please try again later.")}finally{d(!1)}},L=r=>{if(r!==l){window.scrollTo({top:0,behavior:"smooth"});const h=new URLSearchParams(window.location.search);h.set("page",r.toString()),window.history.pushState({},"",`${window.location.pathname}?${h.toString()}`),g(r)}};return s.useEffect(()=>{l!==v.current&&(v.current=l,y())},[l]),e.jsxs("div",{children:[c&&e.jsx("p",{children:c}),e.jsx(z,{children:e.jsx("title",{children:b})}),n?e.jsx(V,{}):e.jsxs(e.Fragment,{children:[j&&e.jsxs("div",{className:"section-dark page-banner list-banner-home more-height half-height sect-blog",children:[e.jsx("div",{className:"full-block page-banner-image",style:{backgroundImage:`url(${T})`}}),e.jsx("div",{className:"full-block overlay"}),e.jsx("div",{className:"container h-100-per",children:e.jsx("div",{className:"row disp-table h-100-per",children:e.jsx("div",{className:"col-sm-12 h-100-per",children:e.jsxs("div",{className:"page-banner-content",children:[e.jsx("div",{className:"text-in-writer",children:e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsxs("h2",{className:"fancy-title animate",children:[b,e.jsx("span",{className:"sub-title-fnt",children:F})]})})}),e.jsx("div",{className:"property-search property-search-full hide d-none"})]})})})})]}),e.jsx("div",{className:"news-events pt25 mb25",children:e.jsxs("div",{className:"container mb-50",children:[!j&&e.jsx(f,{item:!0,xs:12,md:6,mt:5,mb:3,children:e.jsx(x,{variant:"overline",color:"primary",children:"Home / News & Events"})}),e.jsx(f,{container:!0,spacing:3,children:o.length>0?o.map((r,h)=>e.jsx(f,{item:!0,xs:12,sm:6,md:3,children:e.jsx(q,{event:r})},`${r.id}-${h}`)):e.jsx(f,{item:!0,xs:12,children:e.jsx(K,{})})})]})})]}),e.jsx(O,{currentPage:l,totalPages:C,onPageChange:L})]})},O=({currentPage:t,totalPages:n,onPageChange:d})=>{if(n<=1)return null;const o=5;let i=t-Math.floor(o/2),c=t+Math.floor(o/2);i<1?(i=1,c=Math.min(o,n)):c>n&&(c=n,i=Math.max(1,n-o+1));const u=Array.from({length:c-i+1},(a,p)=>i+p);return e.jsxs("div",{className:"custom-pagination",children:[t>1&&e.jsx("button",{onClick:()=>d(t-1),children:"«"}),u.map(a=>e.jsx("button",{className:a===t?"active":"",onClick:()=>d(a),children:a},a)),t<n&&e.jsx("button",{onClick:()=>d(t+1),children:"»"})]})};export{te as default};
