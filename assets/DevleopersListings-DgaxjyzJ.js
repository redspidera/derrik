import{j as e,r as t,H as T}from"./index-C2hfVn6k.js";const A=({property:r})=>{const{image:n,Title:i,DetailUrl:o,ShortDescription:l}=r,c=window.location.origin;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-sm-4",children:e.jsxs("div",{className:"the-inner",children:[e.jsx("a",{href:`${c}${o}`,className:"mor-a-list"}),e.jsx("div",{className:"img-info",style:{backgroundImage:`url(${n})`}}),e.jsx("div",{className:"cls-gp-icon",children:e.jsx("img",{src:l,alt:""})}),e.jsx("h4",{children:i})]})})})},M=()=>e.jsxs("div",{className:"no-listings-container blog-bo",children:[e.jsx("h2",{children:"No Developers Match Your Keyword"}),e.jsx("img",{src:"/img/residential.png",alt:""}),e.jsx("p",{children:"Try resetting your filters to see more listings."})]}),g=()=>e.jsx("div",{className:"col col-sm-6 col-md-4 plr-3 p-card",children:e.jsxs("div",{className:"card card-property skeleton-item card-link taphover",children:[e.jsx("div",{className:"card-image skeleton-item",children:e.jsx("div",{})}),e.jsxs("div",{className:"property-icons",children:[e.jsx("div",{className:"property-icon",children:e.jsxs("div",{className:"d-align-center",children:[e.jsx("span",{className:"shado"}),e.jsxs("span",{className:"b-value-parent skeleton-item",style:{backgroundColor:"#eee"},children:[e.jsx("span",{className:"b-value",children:"4"}),e.jsx("span",{children:"Bedrooms"})]})]})}),e.jsx("div",{className:"property-icon",children:e.jsxs("div",{className:"d-align-center property-icon-flex",children:[e.jsx("span",{className:"shado"}),e.jsxs("span",{className:"b-value-parent skeleton-item",children:[e.jsx("span",{className:"b-value",children:"5"}),e.jsx("span",{children:"Bathrooms"})]})]})})]}),e.jsxs("div",{className:"card-content card-contentts pb-0",children:[e.jsx("h3",{children:e.jsx("a",{})}),e.jsx("p",{className:"skeleton-item",children:"  "}),e.jsx("p",{className:"price skeleton-item",style:{display:"inline-block",width:"50px"},children:" "})]}),e.jsxs("div",{className:"actions mt-0",children:[e.jsx("a",{className:"btn btn-outline-secondary skeleton-item",target:"_blank",rel:"noopener noreferrer",children:e.jsx("span",{})}),e.jsx("a",{className:"btn btn-outline-secondary skeleton-item",rel:"noopener noreferrer"}),e.jsx("a",{className:"btn btn-outline-secondary whatsapp-color skeleton-item",rel:"noopener noreferrer","aria-label":"WhatsApp"})]})]})}),_=({formData:r,handleInputChange:n,handleSubmit:i,setFormData:o})=>{const l=()=>{o(()=>{const c={keyword:""},j=new URLSearchParams({}),p=`${window.location.pathname}?${j.toString()}`;return window.history.pushState({},"",p),c})};return e.jsxs("form",{onSubmit:i,className:"property-search-form",id:"frmId",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",placeholder:"Search Developers",name:"keyword",id:"keyword",value:r.keyword,onChange:n,className:"form-control"})}),e.jsx("div",{className:"form-group mx-srchbtn",children:e.jsxs("div",{className:"d-flex justify-content-between gap-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",children:"Search"}),e.jsx("button",{type:"button",style:{opacity:.6},onClick:l,className:"btn btn-default btn-reset",children:"Reset"})]})})]})},W=({apiUrl:r})=>{const[n,i]=t.useState(!1),[o,l]=t.useState([]),[c,j]=t.useState(null),[a,p]=t.useState({keyword:""}),[m,u]=t.useState(1),b=t.useRef(0),[y,k]=t.useState(1),[N,S]=t.useState("Blog : News & Trends"),[D,P]=t.useState("/img/blog.jpg"),[R,$]=t.useState(0),F=t.useRef(a),v=t.useRef(a);t.useEffect(()=>{F.current=a},[a]),t.useEffect(()=>{const s=new URLSearchParams(window.location.search);p({keyword:s.get("keyword")||""}),u(Number(s.get("page"))||1)},[]),t.useEffect(()=>{a.keyword!==v.current.keyword&&(f(),v.current=a)},[a,m]);const f=async()=>{i(!0),j(null);try{const s=new URLSearchParams({keyword:a.keyword,page:m.toString()}),d=`${r}?${s.toString()}`,x=await fetch(d);if(!x.ok)throw new Error("Failed to fetch properties");const h=await x.json();l(h.data.records||[]),k(h.data.total_pages),h.data.banner_image&&P(h.data.banner_image),S(h.data.title||"Blog : News & Trends"),$(Number(h.data.count)||0)}catch(s){console.error("Error fetching properties:",s),j("Failed to load properties. Please try again later.")}finally{i(!1)}},C=s=>{const{name:d,value:x}=s.target;p(h=>{const w={...h,[d]:d==="minPrice"||d==="maxPrice"?Number(x):x},B=new URLSearchParams({keyword:w.keyword,page:"1"}),L=`${window.location.pathname}?${B.toString()}`;return window.history.pushState({},"",L),u(1),w})},E=s=>{if(s!==m){window.scrollTo({top:0,behavior:"smooth"});const d=new URLSearchParams(window.location.search);d.set("page",s.toString());const x=`${window.location.pathname}?${d.toString()}`;window.history.pushState({},"",x),console.log(s+"currentPage"+m),u(s)}},U=s=>{s.preventDefault(),f()};return t.useEffect(()=>{m!==b.current&&(b.current=m,f())},[m]),e.jsxs("div",{children:[e.jsxs("div",{className:"section-dark page-banner list-banner-home for-listing-page more-height sect-blog",children:[e.jsx("div",{className:"full-block page-banner-image",style:{backgroundImage:`url(${D})`}}),e.jsx("div",{className:"full-block overlay"}),e.jsx("div",{className:"container h-100-per",children:e.jsx("div",{className:"row disp-table h-100-per",children:e.jsx("div",{className:"col-sm-12 h-100-per",children:e.jsxs("div",{className:"page-banner-content",children:[e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsx("h2",{className:"site-h2 mb-0",children:N})}),e.jsx("div",{className:"property-search property-search-full",children:e.jsx(_,{formData:a,handleInputChange:C,handleSubmit:U,setFormData:p})})]})})})})]}),c&&e.jsx("p",{children:c}),e.jsxs(T,{children:[e.jsx("title",{children:N})," "]}),e.jsx("div",{id:"blog",className:"blog list-project pt25 mb25",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col col-sm-12 p-my mb10",children:e.jsx(e.Fragment,{children:o.length>0?e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsxs("p",{className:"text-right pr15",children:[R," records found"]})}):e.jsx("div",{})})})}),e.jsx("div",{className:"row article gy-4 posts-list grid",children:n?e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsx(g,{}),e.jsx(g,{})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"inf-its row",children:o.length>0?o.map((s,d)=>e.jsx(A,{property:s},`${s.id}-${d}`)):e.jsx(M,{})})})})]})}),e.jsx("div",{className:"clearfix"}),e.jsx(I,{currentPage:m,totalPages:y,onPageChange:E}),e.jsx("div",{className:"clearfix"})]})},I=({currentPage:r,totalPages:n,onPageChange:i})=>{if(n<=1)return null;const o=5;let l=r-Math.floor(o/2),c=r+Math.floor(o/2);l<1?(l=1,c=Math.min(o,n)):c>n&&(c=n,l=Math.max(1,n-o+1));const j=Array.from({length:c-l+1},(a,p)=>l+p);return e.jsxs("div",{className:"custom-pagination",children:[r>1&&e.jsx("button",{onClick:()=>i(r-1),children:"«"}),j.map(a=>e.jsx("button",{className:a===r?"active":"",onClick:()=>i(a),children:a},a)),r<n&&e.jsx("button",{onClick:()=>i(r+1),children:"»"})]})};export{W as default};
