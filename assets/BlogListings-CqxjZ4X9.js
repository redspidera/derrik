import{j as e,N as y,r as t,H as A}from"./index-C2hfVn6k.js";const I=({property:r})=>{const{image:n,Title:i,slug:l,ShortDescription:o}=r;return e.jsx("div",{className:"col-md-4 blg",children:e.jsxs("article",{className:"blog",children:[n&&e.jsx("figure",{children:e.jsxs(y,{to:`/article/${l}`,children:[e.jsx("img",{src:n,alt:""}),e.jsx("div",{className:"preview",children:e.jsx("span",{children:"Read More"})})]})}),e.jsxs("div",{className:"post_info",children:[e.jsx("h1",{children:e.jsx(y,{to:`/article/${l}`,children:i})}),e.jsx("p",{children:o})]})]})})},H=()=>e.jsxs("div",{className:"no-listings-container blog-bo",children:[e.jsx("h2",{children:"No Blogs Match Your Keyword"}),e.jsx("img",{src:"/img/residential.png",alt:""}),e.jsx("p",{children:"Try resetting your filters to see more listings."})]}),g=()=>e.jsx("div",{className:"col col-sm-6 col-md-4 plr-3 p-card",children:e.jsxs("div",{className:"card card-property skeleton-item card-link taphover",children:[e.jsx("div",{className:"card-image skeleton-item",children:e.jsx("div",{})}),e.jsxs("div",{className:"property-icons",children:[e.jsx("div",{className:"property-icon",children:e.jsxs("div",{className:"d-align-center",children:[e.jsx("span",{className:"shado"}),e.jsxs("span",{className:"b-value-parent skeleton-item",style:{backgroundColor:"#eee"},children:[e.jsx("span",{className:"b-value",children:"4"}),e.jsx("span",{children:"Bedrooms"})]})]})}),e.jsx("div",{className:"property-icon",children:e.jsxs("div",{className:"d-align-center property-icon-flex",children:[e.jsx("span",{className:"shado"}),e.jsxs("span",{className:"b-value-parent skeleton-item",children:[e.jsx("span",{className:"b-value",children:"5"}),e.jsx("span",{children:"Bathrooms"})]})]})})]}),e.jsxs("div",{className:"card-content card-contentts pb-0",children:[e.jsx("h3",{children:e.jsx("a",{})}),e.jsx("p",{className:"skeleton-item",children:"  "}),e.jsx("p",{className:"price skeleton-item",style:{display:"inline-block",width:"50px"},children:" "})]}),e.jsxs("div",{className:"actions mt-0",children:[e.jsx("a",{className:"btn btn-outline-secondary skeleton-item",target:"_blank",rel:"noopener noreferrer",children:e.jsx("span",{})}),e.jsx("a",{className:"btn btn-outline-secondary skeleton-item",rel:"noopener noreferrer"}),e.jsx("a",{className:"btn btn-outline-secondary whatsapp-color skeleton-item",rel:"noopener noreferrer","aria-label":"WhatsApp"})]})]})}),K=({formData:r,handleInputChange:n,handleSubmit:i,setFormData:l})=>{const o=()=>{l(()=>{const d={keyword:""},j=new URLSearchParams({}),p=`${window.location.pathname}?${j.toString()}`;return window.history.pushState({},"",p),d})};return e.jsxs("form",{onSubmit:i,className:"property-search-form",id:"frmId",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",placeholder:"Search News",name:"keyword",id:"keyword",value:r.keyword,onChange:n,className:"form-control"})}),e.jsx("div",{className:"form-group mx-srchbtn",children:e.jsxs("div",{className:"d-flex justify-content-between gap-3",children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",children:"Search"}),e.jsx("button",{type:"button",style:{opacity:.6},onClick:o,className:"btn btn-default btn-reset",children:"Reset"})]})})]})},z=({apiUrl:r})=>{const[n,i]=t.useState(!1),[l,o]=t.useState([]),[d,j]=t.useState(null),[a,p]=t.useState({keyword:""}),[h,u]=t.useState(1),b=t.useRef(0),[k,S]=t.useState(1),[N,R]=t.useState("Blog : News & Trends"),[P,$]=t.useState(""),[C,F]=t.useState(""),[B,E]=t.useState(0),D=t.useRef(a),w=t.useRef(a);t.useEffect(()=>{D.current=a},[a]),t.useEffect(()=>{const s=new URLSearchParams(window.location.search);p({keyword:s.get("keyword")||""}),u(Number(s.get("page"))||1)},[]),t.useEffect(()=>{a.keyword!==w.current.keyword&&(f(),w.current=a)},[a,h]);const f=async()=>{i(!0),j(null);try{const s=new URLSearchParams({keyword:a.keyword,page:h.toString()}),c=`${r}?${s.toString()}`,x=await fetch(c);if(!x.ok)throw new Error("Failed to fetch properties");const m=await x.json();o(m.data.records||[]),S(m.data.total_pages),m.data.banner_image&&F(m.data.banner_image),R(m.data.title||"Blog : News & Trends"),$(m.data.sub_title||""),E(Number(m.data.count)||0)}catch(s){console.error("Error fetching properties:",s),j("Failed to load properties. Please try again later.")}finally{i(!1)}},_=s=>{const{name:c,value:x}=s.target;p(m=>{const v={...m,[c]:c==="minPrice"||c==="maxPrice"?Number(x):x},T=new URLSearchParams({keyword:v.keyword,page:"1"}),M=`${window.location.pathname}?${T.toString()}`;return window.history.pushState({},"",M),u(1),v})},L=s=>{if(s!==h){window.scrollTo({top:0,behavior:"smooth"});const c=new URLSearchParams(window.location.search);c.set("page",s.toString());const x=`${window.location.pathname}?${c.toString()}`;window.history.pushState({},"",x),console.log(s+"currentPage"+h),u(s)}},U=s=>{s.preventDefault(),f()};return t.useEffect(()=>{h!==b.current&&(b.current=h,f())},[h]),e.jsxs("div",{children:[e.jsxs("div",{className:"section-dark page-banner list-banner-home for-listing-page more-height half-height sect-blog",children:[e.jsx("div",{className:"full-block page-banner-image",style:{backgroundImage:`url(${C})`}}),e.jsx("div",{className:"full-block overlay"}),e.jsx("div",{className:"container h-100-per blog-list-li",children:e.jsx("div",{className:"row disp-table h-100-per",children:e.jsx("div",{className:"col-sm-12 h-100-per",children:e.jsxs("div",{className:"page-banner-content",children:[e.jsx("div",{className:"text-in-writer",children:e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsxs("h2",{className:"fancy-title animate animated",children:[N,e.jsx("span",{className:"sub-title-fnt",children:P})]})})}),e.jsx("div",{className:"property-search property-search-full",children:e.jsx(K,{formData:a,handleInputChange:_,handleSubmit:U,setFormData:p})})]})})})})]}),d&&e.jsx("p",{children:d}),e.jsxs(A,{children:[e.jsx("title",{children:N})," "]}),e.jsx("div",{id:"blog",className:"blog list-project pt25 mb25",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col col-sm-12 p-my mb10",children:e.jsx(e.Fragment,{children:l.length>0?e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsxs("p",{className:"text-right pr15",children:[B," records found"]})}):e.jsx("div",{})})})}),e.jsx("div",{className:"row article gy-4 posts-list grid",children:n?e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsx(g,{}),e.jsx(g,{})]}):e.jsx(e.Fragment,{children:l.length>0?l.map((s,c)=>e.jsx(I,{property:s},`${s.id}-${c}`)):e.jsx(H,{})})})]})}),e.jsx("div",{className:"clearfix"}),e.jsx(W,{currentPage:h,totalPages:k,onPageChange:L}),e.jsx("div",{className:"clearfix"})]})},W=({currentPage:r,totalPages:n,onPageChange:i})=>{if(n<=1)return null;const l=5;let o=r-Math.floor(l/2),d=r+Math.floor(l/2);o<1?(o=1,d=Math.min(l,n)):d>n&&(d=n,o=Math.max(1,n-l+1));const j=Array.from({length:d-o+1},(a,p)=>o+p);return e.jsxs("div",{className:"custom-pagination",children:[r>1&&e.jsx("button",{onClick:()=>i(r-1),children:"«"}),j.map(a=>e.jsx("button",{className:a===r?"active":"",onClick:()=>i(a),children:a},a)),r<n&&e.jsx("button",{onClick:()=>i(r+1),children:"»"})]})};export{z as default};
