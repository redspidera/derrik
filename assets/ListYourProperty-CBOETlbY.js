import{j as e,r as i,B as m,T as l,t as x,V as S,W as c,a as T,G as W,q as I}from"./index-C2hfVn6k.js";import{P as N}from"./style-hE5DBTlN.js";import{h as w,g as k,S as L}from"./react-google-recaptcha-v3.esm-D6mVwgwV.js";import{S as F}from"./SuccessMessage-XyZWWjU2.js";import{G as g}from"./Grid-BNK0cvxE.js";import"./index-B6aWreaO.js";const B="6LfeHlUrAAAAAIQ6293y6Q_JdroN6UgRCYNRX1Wn",C="https://dsp.rsworkspace.com/api/site/",M=()=>{const{executeRecaptcha:f}=k(),[s,h]=i.useState({name:"",email:"",ph:"",sect:"",category:"",address:""}),[y,j]=i.useState(!1),[v,n]=i.useState(""),[b,P]=i.useState(""),[t,d]=i.useState({}),[E,A]=i.useState([]);i.useEffect(()=>{(async()=>{try{const p=await(await fetch(`${C}listing_category`)).json();A(p)}catch(a){console.error("Error fetching options:",a)}})()},[]);const _=()=>{const r={};return s.name.trim()||(r.name="Name is required"),s.email.trim()||(r.email="Email is required"),s.ph.trim()||(r.ph="Phone is required"),s.sect.trim()||(r.sect="Section is required"),s.category.trim()||(r.category="Category is required"),s.address.trim()||(r.address="Property Address is required"),d(r),Object.keys(r).length===0},u=r=>{const{name:a,value:p}=r.target;h(o=>({...o,[a]:p})),d(o=>({...o,[a]:""})),n("")},q=r=>{h(a=>({...a,ph:r||""})),d(a=>({...a,ph:""})),n("")},R=async r=>{if(r.preventDefault(),!!_()){if(!f){n("Recaptcha not yet available");return}j(!0),n("");try{const a=await f("list_your_property_submit"),p=new URLSearchParams({...s,recaptchaToken:a}),o=await I.get(`${C}send_list_your_property`,{params:p});o.data.status==="success"?(P(o.data.message),h({name:"",email:"",ph:"",sect:"",category:"",address:""}),d({})):(n(o.data.message||"Submission failed"),o.data.errors&&d(o.data.errors))}catch{n("Network error. Please try again later.")}finally{j(!1)}}};return e.jsxs(m,{sx:{maxWidth:500,mx:"auto",mt:0},children:[e.jsx(l,{variant:"h5",fontWeight:600,gutterBottom:!0,sx:{color:"text.primary",mb:1},children:"List Your Property"}),b&&e.jsx(F,{responseMessage:b}),e.jsxs("form",{onSubmit:R,noValidate:!0,children:[e.jsx(x,{label:"Name",name:"name",fullWidth:!0,margin:"normal",value:s.name,onChange:u,error:!!t.name,helperText:t.name,required:!0}),e.jsx(x,{label:"Email",name:"email",fullWidth:!0,margin:"normal",value:s.email,onChange:u,error:!!t.email,helperText:t.email,required:!0}),e.jsxs(m,{className:"phoneinp-grid",sx:{"& .PhoneInputInput":{fontSize:"16px",padding:"16.5px 14px",border:"0px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px",width:"100%",boxSizing:"border-box",backgroundColor:"#fff"},mt:2,position:"relative"},children:[e.jsx(N,{international:!0,defaultCountry:"AE",value:s.ph,onChange:q,placeholder:"Phone",countryCallingCodeEditable:!1,className:"mui-phone-input",style:{paddingLeft:"48px"}}),t.ph&&e.jsx(l,{color:"error",variant:"caption",sx:{pl:1},children:t.ph})]}),e.jsxs(g,{container:!0,spacing:2,children:[e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsxs(S,{name:"sect",value:s.sect,onChange:u,displayEmpty:!0,fullWidth:!0,sx:{mt:3},error:!!t.sect,required:!0,children:[e.jsx(c,{value:"",disabled:!0,children:"Purpose"}),e.jsx(c,{value:"1",children:"For Sale"}),e.jsx(c,{value:"2",children:"For Rent"}),e.jsx(c,{value:"3",children:"For Buy"})]}),t.sect&&e.jsx(l,{color:"error",variant:"caption",children:t.sect})]}),e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsxs(S,{name:"category",value:s.category,onChange:u,displayEmpty:!0,fullWidth:!0,sx:{mt:3},error:!!t.category,required:!0,children:[e.jsx(c,{value:"",disabled:!0,children:"Category"}),E.map(r=>e.jsx(c,{value:r.id,children:r.name},r.id))]}),t.category&&e.jsx(l,{color:"error",variant:"caption",children:t.category})]})]}),e.jsx(x,{label:"Property Address",name:"address",fullWidth:!0,margin:"normal",multiline:!0,rows:3,value:s.address,onChange:u,error:!!t.address,helperText:t.address,required:!0}),e.jsx(m,{sx:{mt:3,position:"relative"},children:e.jsx(T,{type:"submit",variant:"contained",disabled:y,fullWidth:!0,children:y?e.jsx(W,{size:24}):"Submit Details"})}),v&&e.jsx(l,{sx:{mt:2},color:"error",children:v}),e.jsxs(m,{sx:{mt:3,display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{fontSize:"small",color:"action"}),e.jsxs(l,{variant:"caption",color:"textSecondary",children:["Protected by reCAPTCHA — ",e.jsx("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy"})," | ",e.jsx("a",{href:"https://policies.google.com/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms"})]})]})]})]})},H=()=>e.jsx(w,{reCaptchaKey:B,scriptProps:{async:!0,defer:!0,appendTo:"head",nonce:void 0},useRecaptchaNet:!0,children:e.jsx(M,{})});export{H as default};
