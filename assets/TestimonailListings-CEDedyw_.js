import{c as F,j as e,u as L,B,T as v,r as t,H as D}from"./index-C2hfVn6k.js";import{u as P}from"./index-1rqe2FLV.js";import{A as z}from"./Avatar-DAzQGZyh.js";import{G as y}from"./Grid-BNK0cvxE.js";const N=F(e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"}),"FormatQuote"),A=({property:a})=>{const{image:r,Title:c,ShortDescription:n}=a,l=L(),i=P(l.breakpoints.down("sm"));return e.jsxs(B,{sx:{border:"3px double #0047ab",borderRadius:"50%",width:i?250:280,height:i?250:280,mx:"auto",textAlign:"center",px:3,py:2,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:[e.jsx(N,{sx:{position:"absolute",top:16,left:16,fontSize:36,color:"#0047ab"}}),e.jsx(N,{sx:{position:"absolute",bottom:16,right:16,fontSize:36,color:"#0047ab",transform:"rotate(180deg)"}}),e.jsx("div",{className:"hide d-none",children:e.jsx(v,{variant:"body1",sx:{fontWeight:500,mb:2},children:a.Title})}),a.image&&e.jsx("div",{className:" ",children:e.jsx(z,{className:"d-none hide",src:r,alt:c,sx:{width:56,height:56,mb:1}})}),e.jsx(v,{variant:"subtitle2",sx:{fontWeight:"bold"},children:n})]})},I=({apiUrl:a})=>{const[r,c]=t.useState(!1),[n,l]=t.useState([]),[i,u]=t.useState(null),[s,f]=t.useState({keyword:""}),[d,p]=t.useState(1),g=t.useRef(0),[S,k]=t.useState(1),[j,T]=t.useState("Blog : News & Trends"),[R,E]=t.useState("/img/blog.jpg"),[C,_]=t.useState(0),M=t.useRef(s),b=t.useRef(s);t.useEffect(()=>{M.current=s},[s]),t.useEffect(()=>{const o=new URLSearchParams(window.location.search);f({keyword:o.get("keyword")||""}),p(Number(o.get("page"))||1)},[]),t.useEffect(()=>{s.keyword!==b.current.keyword&&(w(),b.current=s)},[s,d]);const w=async()=>{c(!0),u(null);try{const o=new URLSearchParams({keyword:s.keyword,page:d.toString()}),m=`${a}?${o.toString()}`,x=await fetch(m);if(!x.ok)throw new Error("Failed to fetch properties");const h=await x.json();l(h.data.records||[]),k(h.data.total_pages),h.data.banner_image&&E(h.data.banner_image),T(h.data.title||"Blog : News & Trends"),_(Number(h.data.count)||0)}catch(o){console.error("Error fetching properties:",o),u("Failed to load properties. Please try again later.")}finally{c(!1)}},$=o=>{if(o!==d){window.scrollTo({top:0,behavior:"smooth"});const m=new URLSearchParams(window.location.search);m.set("page",o.toString());const x=`${window.location.pathname}?${m.toString()}`;window.history.pushState({},"",x),p(o)}};return t.useEffect(()=>{d!==g.current&&(g.current=d,w())},[d]),e.jsxs("div",{children:[e.jsxs("div",{className:"hide section-dark page-banner list-banner-home for-listing-page more-height google_review",children:[e.jsx("div",{className:"full-block page-banner-image",style:{backgroundImage:`url(${R})`}}),e.jsx("div",{className:"full-block overlay"}),e.jsx("div",{className:"container h-100-per",children:e.jsx("div",{className:"row disp-table h-100-per",children:e.jsx("div",{className:"col-sm-12 h-100-per",children:e.jsx("div",{className:"page-banner-content",children:e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsx("h2",{className:"site-h2 mb-0",children:j})})})})})})]}),i&&e.jsx("p",{children:i}),e.jsx(D,{children:e.jsx("title",{children:j})}),e.jsx("div",{id:"blog",className:"blog list-project pt25 mb25",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col col-sm-12 p-my mb10 hide d-none",children:n.length>0&&e.jsx("div",{className:"fancy-title-hold text-left clearfix",children:e.jsxs("p",{className:"text-right pr15",children:[C," records found"]})})})}),e.jsx("div",{className:"row article gy-4 posts-list grid",children:r?e.jsx("div",{className:"col-12 text-center py-5",children:"Loading testimonials..."}):e.jsx(y,{container:!0,spacing:8,children:n.map((o,m)=>e.jsx(y,{item:!0,xs:12,sm:6,md:4,children:e.jsx(A,{property:o})},`${o.id}-${m}`))})})]})}),e.jsx(U,{currentPage:d,totalPages:S,onPageChange:$})]})},U=({currentPage:a,totalPages:r,onPageChange:c})=>{if(r<=1)return null;const n=5;let l=a-Math.floor(n/2),i=a+Math.floor(n/2);l<1?(l=1,i=Math.min(n,r)):i>r&&(i=r,l=Math.max(1,r-n+1));const u=Array.from({length:i-l+1},(s,f)=>l+f);return e.jsxs("div",{className:"custom-pagination",children:[a>1&&e.jsx("button",{onClick:()=>c(a-1),children:"«"}),u.map(s=>e.jsx("button",{className:s===a?"active":"",onClick:()=>c(s),children:s},s)),a<r&&e.jsx("button",{onClick:()=>c(a+1),children:"»"})]})},V=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{A as T,I as a,V as b};
