import{c as E,j as e,B as g,N,a as M,L as $,T as u,u as H,r as s,H as B}from"./index-C2hfVn6k.js";import{C as z,a as U}from"./CardContent-CVYRDK_0.js";import{C as W}from"./CardMedia-CtTbO1ES.js";import O from"./PropertyForm-BwgF6pqq.js";import{H as A}from"./HomeWorkOutlined-skMYUjx6.js";import{u as G}from"./index-1rqe2FLV.js";import{F as V}from"./FullPageLoader-D93dE52d.js";import{G as b}from"./Grid-BNK0cvxE.js";import"./Constants-D6TUlAnp.js";import"./Hotel-B0R_E2y9.js";import"./swiper-bundle-BjZ7TqKU.js";const Z=E([e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),e.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),Q=({property:r})=>{const{id:a,image:d,AtttributePropertyDetails:c,adTitle:p,DetailUrl:m,CommunityTitle:f,bgImage:i,developer_name:o,p_o_r:t,PriceTitleDetail:v}=r,h=window.location.origin;return e.jsxs(z,{sx:{borderRadius:3,overflow:"hidden",boxShadow:"0px 6px 24px rgba(0, 0, 0, 0.08)",transition:"0.3s ease","&:hover":{boxShadow:"0px 10px 36px rgba(0, 0, 0, 0.12)",transform:"translateY(-4px)"},display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxs(g,{sx:{position:"relative"},children:[e.jsx(W,{component:"div",image:d,sx:{height:360,backgroundSize:"cover",backgroundPosition:"center"}}),e.jsx(g,{sx:{position:"absolute",top:12,left:12,backgroundColor:"white",p:.5,borderRadius:"50%",boxShadow:1,width:48,height:48},title:o,children:e.jsx("img",{src:i,alt:o,style:{width:"100%",height:"100%",objectFit:"contain"}})}),e.jsx(g,{sx:{position:"absolute",bottom:12,right:12},children:e.jsx(N,{to:`${h}${m}`,children:e.jsx(M,{variant:"contained",startIcon:e.jsx(Z,{}),size:"small",children:"View"})})})]}),e.jsxs(U,{sx:{backgroundColor:"#f9f9f9",flexGrow:1},children:[e.jsxs(g,{display:"flex",alignItems:"center",mb:1,children:[e.jsx($,{fontSize:"small",sx:{color:"gray",mr:1}}),e.jsx(u,{variant:"body2",color:"text.secondary",children:f})]}),e.jsx(u,{variant:"h6",component:N,to:`${h}${m}`,sx:{textDecoration:"none",color:"text.primary",fontWeight:600,lineHeight:1.3,display:"block",mb:1},children:p}),e.jsxs(g,{children:[t!=="1"&&e.jsx(u,{variant:"caption",color:"text.secondary",children:"Starting From"}),e.jsx(u,{variant:"h5",color:"primary",sx:{mt:.5,color:"var(--primaryColor)",fontWeight:"bold"},dangerouslySetInnerHTML:{__html:v}})]}),c&&e.jsx(u,{variant:"body2",color:"text.secondary",sx:{mt:2},dangerouslySetInnerHTML:{__html:c}})]})]},a)},Y=()=>{const r=H(),a=G(r.breakpoints.down("sm")),d=()=>{window.location.href=window.location.pathname};return e.jsxs(g,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",py:{xs:4,sm:6},px:{xs:2,sm:4},mx:"auto",maxWidth:500,bgcolor:r.palette.mode==="light"?"#f9f9f9":r.palette.background.paper,borderRadius:3,boxShadow:r.palette.mode==="light"?3:0,mt:4,children:[e.jsx(A,{sx:{fontSize:a?56:72,color:r.palette.text.disabled,mb:2}}),e.jsx(u,{variant:a?"h6":"h5",fontWeight:"bold",gutterBottom:!0,children:"No Property Listings Match"}),e.jsx(u,{variant:"body2",color:"textSecondary",sx:{mb:2},children:"Try resetting your filters to explore more properties."}),e.jsx(M,{variant:"contained",color:"primary",onClick:d,children:"Reset Filters"})]})},ce=({apiUrl:r})=>{const[a,d]=s.useState(!0),[c,p]=s.useState([]),[m,f]=s.useState(null),i=new URLSearchParams(window.location.search),o=s.useMemo(()=>{const l=location.pathname.split("/").filter(Boolean),x={};return l.forEach(j=>{const[y,...P]=j.split("-");y&&P.length>0&&(x[y]=P.join("-"))}),x},[location.pathname]),[t,v]=s.useState({sectorType:"offplan",propertyType:i.get("propertyType")||"",listingType:i.get("listingType")||"",community:i.get("community")||"",developer:i.get("developer")||"",year:i.get("year")||"",minPrice:Number(o.minPrice)||0,maxPrice:Number(o.maxPrice)||0,areaMin:Number(o.areaMin)||0,areaMax:Number(o.areaMax)||0,bedrooms:o.beds||"",bathrooms:o.baths||"",keywords:o.keywords||"",occupant_status:o.status||"",furnishing:o.furnishing||"",amenities:o.amenities||"",tourTypes:o.tourTypes||""}),[h,C]=s.useState(1),w=s.useRef(0),[k,F]=s.useState(1),[S,R]=s.useState("Properties"),[L,_]=s.useState(0),I=s.useRef(t),n=s.useRef(t);s.useEffect(()=>{I.current=t},[t]),s.useEffect(()=>{(t.sectorType!==n.current.sectorType||t.propertyType!==n.current.propertyType||t.listingType!==n.current.listingType||t.minPrice!==n.current.minPrice||t.maxPrice!==n.current.maxPrice||t.areaMin!==n.current.areaMin||t.areaMax!==n.current.areaMax||t.community!==n.current.community||t.developer!==n.current.developer||t.year!==n.current.year||t.bedrooms!==n.current.bedrooms||t.bathrooms!==n.current.bathrooms||t.occupant_status!==n.current.occupant_status)&&(T(),n.current=t)},[t,h]);const T=async()=>{d(!0),f(null);try{const l=new URLSearchParams({sectorType:t.sectorType,propertyType:t.propertyType,listingType:t.listingType,community:t.community,minPrice:t.minPrice.toString(),maxPrice:t.maxPrice.toString(),areaMin:t.areaMin.toString(),areaMax:t.areaMax.toString(),bedrooms:t.bedrooms,bathrooms:t.bathrooms,developer:t.developer,year:t.year,occupant_status:t.occupant_status,page:h.toString()}),x=`${r}?${l.toString()}`,j=await fetch(x);if(!j.ok)throw new Error("Failed to fetch properties");const y=await j.json();p(y.data.records||[]),F(y.data.total_pages),R(y.data.title||"Properties"),_(Number(y.data.count)||0)}catch(l){console.error("Error fetching properties:",l),f("Failed to load properties. Please try again later."),p([])}finally{d(!1)}},D=l=>{if(l!==h){window.scrollTo({top:0,behavior:"smooth"});const x=new URLSearchParams(window.location.search);x.set("page",l.toString());const j=`${window.location.pathname}?${x.toString()}`;window.history.pushState({},"",j),C(l)}};return s.useEffect(()=>{h!==w.current&&(w.current=h,T())},[h]),e.jsxs("div",{children:[e.jsxs("div",{className:"section-dark page-banner list-banner-home for-listing-page only-property not-mob",children:[e.jsx("div",{className:"full-block page-banner-image"}),e.jsx("div",{className:"full-block overlay"}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row disp-table",children:e.jsx("div",{className:"col-sm-12",children:e.jsx("div",{className:"page-banner-content",children:e.jsx("div",{className:"property-search property-search-full",children:e.jsx(O,{origin:"list",setFormData:v})})})})})})]}),m&&e.jsx("p",{children:m}),e.jsxs(B,{children:[e.jsx("title",{children:S})," "]}),e.jsx("div",{id:"blog",className:"blog list-project pt25 new-offplan-lst",children:e.jsx("div",{className:"container",children:a?e.jsx(e.Fragment,{children:e.jsx(V,{})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col  mb15 p-my",children:e.jsx(e.Fragment,{children:c.length>0?e.jsx(e.Fragment,{children:e.jsx(b,{container:!0,spacing:2,children:e.jsx(b,{item:!0,xs:12,sm:9,children:c.length>0?e.jsxs(g,{children:[e.jsx(u,{variant:"h5",fontWeight:600,gutterBottom:!0,children:S}),e.jsxs(u,{variant:"body2",color:"text.secondary",children:[L," properties found"]})]}):e.jsx(g,{})})})}):e.jsx(e.Fragment,{})})})}),e.jsx(b,{container:!0,spacing:4,className:"posts-list mb50",children:c.length>0?c.map((l,x)=>e.jsx(b,{item:!0,xs:12,sm:6,md:6,lg:4,xl:4,children:e.jsx(Q,{property:l})},`${l.id}-${x}`)):!a&&!m&&e.jsx(Y,{})})]})})}),e.jsx("div",{className:"clearfix"}),e.jsx(q,{currentPage:h,totalPages:k,onPageChange:D}),e.jsx("div",{className:"clearfix"})]})},q=({currentPage:r,totalPages:a,onPageChange:d})=>{if(a<=1)return null;const c=5;let p=r-Math.floor(c/2),m=r+Math.floor(c/2);p<1?(p=1,m=Math.min(c,a)):m>a&&(m=a,p=Math.max(1,a-c+1));const f=Array.from({length:m-p+1},(i,o)=>p+o);return e.jsxs("div",{className:"custom-pagination",children:[r>1&&e.jsx("button",{onClick:()=>d(r-1),children:"«"}),f.map(i=>e.jsx("button",{className:i===r?"active":"",onClick:()=>d(i),children:i},i)),r<a&&e.jsx("button",{onClick:()=>d(r+1),children:"»"})]})};export{ce as default};
